<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script>window.$ = window.jQuery = require('jquery')</script>
    <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
    <script src="semantic/dist/semantic.min.js"></script>
    <title>Kats</title>
</head>
<body>
    <div class="ui secondary pointing top fixed menu">
        <a class="active item" id="go_home">
            Home
        </a>
        <div class="right menu">
            <a class="ui item" id="go_setting">
                Settings
            </a>
        </div>
    </div>
    <div class="ui container">
        <div id="log"></div>
        <div class="ui container centered grid" id="home" style="margin-top: 3em;">
            <div class="ui two item menu">
                <a id="bot_start" class="item">Start</a>
                <a id="bot_stop" class="item">Stop</a>
            </div>
        </div>
        <div class="ui container centered grid" id="setting" style='display: none; margin-top: 3em;'>
            <button class="ui button">Log</button>
        </div>
        <div id="message"></div>
    </div>
    <script>
        let activated_window = 0
        let windows = ['home', 'setting']
        const {ipcRenderer} = require('electron')
        $('#bot_start').click(() => {
            ipcRenderer.send('bot_start')
        })

        $('#bot_stop').click(() => {
            ipcRenderer.send('bot_stop')
        })

        ipcRenderer.on('bot_started', (event, arg) => {
            $('#message').append(`
<div class="ui success message">
    <i class="close icon"></i>
    <p>Bot is running!</p>
</div>
`)
        })

        ipcRenderer.on('bot_stopped', (event, arg) => {
            $('#message').append(`
<div class="ui success message">
    <i class="close icon"></i>
    <p>Bot is stopped!</p>
</div>
`)
        })

        $('#go_home').click(() => {
            if (!(activated_window === 0)) {
                $('#' + windows[activated_window]).hide()
                $('#go_' + windows[activated_window]).removeClass('active')
                $('#go_home').addClass('active')
                $('#home').show()
                activated_window = 0
            }
        })
        $('#go_setting').click(() => {
            if (!(activated_window === 1)) {
                $('#' + windows[activated_window]).hide()
                $('#go_' + windows[activated_window]).removeClass('active')
                $('#go_setting').addClass('active')
                $('#setting').show()
                activated_window = 1
            }
        })
    </script>
</body>
</html>